<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <!-- Custom styles for this template -->
    <!-- <link href="./css/form-validation.css" rel="stylesheet"> -->


    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />

    <title>Screen11</title>
</head>

<body>
    <div class="container">
        <!-- jumbotron update -->
        <div class="py-5 text-center">
            <h2>LESION DETAIL INFORMATION SIR JOHN MONASH HOSPITAL</h2>
        </div>
        
      
                <div class="row">
                    <div class="col-md-1 mb-1">
                        <button type="submit" class="btn btn-primary" onclick="zoomin()">Zoom in</button>
                    </div>
                    <div class="col-md-1 mb-1">
                        <button type="submit" class="btn btn-primary" onclick="zoomout()">Zoom out</button>
                    </div>
    
                    <div class="col-md-1 mb-1">         
                    </div>

                    <div class="col-md-2 mb-1">
                        <button type="submit" class="btn btn-primary">Whole Lesion Window</button>
                    </div>
                    
    
                    <div class="col-md-2 mb-1">
                        <button type="submit" class="btn btn-primary">Highest Possible Magnification</button>
                    </div>

                    <div class="col-md-2 mb-1">
                    </div>

                    <div class="col-md-1 mb-1">
                        <button type="submit" class="btn btn-primary">Add Text</button>
                    </div>

                    <div class="col-md-1 mb-1">
                        <button type="submit" class="btn btn-primary">Crop</button>
                    </div>
                </div>
                
           
        <br class="mb-4">

        <!-- lesion detail -->
        <div class="row">
            <div class="col-md-11 order-md-1">
                    <canvas id="myCanvas" height="600px" width="1000px">
                    </canvas>
                    <div id="buttonWrapper">
                        <input type="button" id="plus" value="+"><input type="button" id="minus" value="-">
                    </div>

            </div>

        </div>

       
        <footer class="my-1 pt-1 text-muted text-center text-small">

        </footer>
    </div>

    

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/holder/2.9.4/holder.min.js"
        integrity="sha256-ifihHN6L/pNU1ZQikrAb7CnyMBvisKG3SUAab0F3kVU=" crossorigin="anonymous"></script>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
  
    <!-- full screen by cursor -->
    <!-- <script>
        $('img[data-enlargable]').addClass('img-enlargable').click(function(){
    var src = $(this).attr('src');
    $('<div>').css({
        background: 'RGBA(0,0,0,.5) url('+src+') no-repeat center',
        backgroundSize: 'contain',
        width:'100%', height:'100%',
        position:'fixed',
        zIndex:'10000',
        top:'0', left:'0',
        cursor: 'zoom-out'
    }).click(function(){
        $(this).remove();
    }).appendTo('body');
});
    </script> -->


<!-- <script type="text/javascript"> 
    function zoomin() { 
        var GFG = document.getElementById("geeks"); 
        var currHeight = GFG.clientHeight; 
            GFG.style.height = (currHeight + 40) + "px"; 
    } 
    function zoomout() { 
        var GFG = document.getElementById("geeks"); 
        var currHeight = GFG.clientHeight; 
            GFG.style.height = (currHeight - 40) + "px"; 
    } 
</script>  -->



<script>
    var canvas = document.getElementById("myCanvas");
            var context = canvas.getContext("2d");
        function draw(scale, translatePos) {
            
            //context.height = 600px;
            // context.width= 500;
            // clear canvas
          
            
            background = new Image();
            background.src = "./images/lesion.png";
            background.onload = function () {
                context.clearRect(0, 0, canvas.width, canvas.height);
                context.save();

                //context.translate(translatePos.x, translatePos.y);
                context.scale(scale, scale);
                context.drawImage(background, translatePos.x, translatePos.y);


            };
            context.restore();

        }

        window.onload = function () {
            var canvas = document.getElementById("myCanvas");
        

            var translatePos = {
                x: 0,
                y: 0
            };
            var zoomPos = {
                x: 0,
                y: 0
            };

            var scale = 1.0;
            var scaleMultiplier = 0.8;
            var startDragOffset = {};
            var mouseDown = false;

            // add button event listeners
            document.getElementById("plus").addEventListener("click", function () {
                scale /= scaleMultiplier;
                draw(scale, translatePos);
            }, false);

            document.getElementById("minus").addEventListener("click", function () {
                scale *= scaleMultiplier;
                draw(scale, translatePos);
            }, false);

            // add event listeners to handle screen drag
            canvas.addEventListener("mousedown", function (evt) {
                mouseDown = true;
                startDragOffset.x = evt.clientX - translatePos.x;
                startDragOffset.y = evt.clientY - translatePos.y;
            });

            canvas.addEventListener("mouseup", function (evt) {
                mouseDown = false;
            });

            canvas.addEventListener("mouseover", function (evt) {
                mouseDown = false;
            });

            canvas.addEventListener("mouseout", function (evt) {
                mouseDown = false;
            });

            canvas.addEventListener("mousemove", function (evt) {
                if (mouseDown) {
                    translatePos.x = evt.clientX - startDragOffset.x;
                    translatePos.y = evt.clientY - startDragOffset.y;
                    draw(scale, translatePos);
                }
            });
           
           // draw(scale, translatePos);
            background = new Image();
            background.src = "./images/lesion.png";
            background.onload = function () {
                context.clearRect(0, 0, canvas.width, canvas.height);
                context.save();
                //context.translate(translatePos.x, translatePos.y);
                context.drawImage(background, 0, 0);
            };
        };

        jQuery(document).ready(function () {
            $("#wrapper").mouseover(function (e) {
                $('#status').html(e.pageX + ', ' + e.pageY);
            });
        })  
</script>


</body>

</html>